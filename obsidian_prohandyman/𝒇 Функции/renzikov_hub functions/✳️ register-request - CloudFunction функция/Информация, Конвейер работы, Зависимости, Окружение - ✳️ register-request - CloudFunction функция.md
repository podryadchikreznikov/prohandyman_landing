
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä - d4ed1sm14vdat7spiqa2
–û–ø–∏—Å–∞–Ω–∏–µ - –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - index.handler
–¢–∞–π–º–∞—É—Ç - 15 —Å–µ–∫

---

–ù–∞ –≤—Ö–æ–¥–µ:
	-> `email` (string, **–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –Ω–µ—Ç phone_number**): Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
	-> `phone_number` (string, **–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –Ω–µ—Ç email**): –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
	-> `password` (string, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**): –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
	-> `user_name` (string, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**): –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–¥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
	-> `verification_method` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, `email` –∏–ª–∏ `sms`): –ö–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `email` –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω email, `sms` –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω —Ç–æ–ª—å–∫–æ phone_number.

–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–±–æ—Ç–∞:
	-> –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è `email`, `phone_number`, `password`, `user_name` –∏ `verification_method`.
	-> –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
		-> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `password`; –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤–æ–∑–≤—Ä–∞—Ç 400.
		-> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –∏–∑ `email` –∏–ª–∏ `phone_number`; –µ—Å–ª–∏ –æ–±–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –≤–æ–∑–≤—Ä–∞—Ç 400.
		-> –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è `phone_number` –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω.
	-> –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞: `AUTO_CONFIRM_MODE` = true –∏–ª–∏ false.
	-> –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `email` –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω email, `sms` –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ phone.
	-> –ü–æ–ª—É—á–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ YDB –¥–ª—è `jwt-database` –∏ `firms-database`.
	-> –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ `jwt-database`:
		-> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `email` –∏–ª–∏ `phone_number`.
		-> –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω, –≤–æ–∑–≤—Ä–∞—Ç 409.
		-> –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω:
			-> –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞.
			-> –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ >= 3 –º–∏–Ω, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (email/SMS) –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ.
			-> –ï—Å–ª–∏ < 3 –º–∏–Ω, –≤–æ–∑–≤—Ä–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –∫–æ–¥ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î).
		-> –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
			-> –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ `firms-database` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `user_id`.
			-> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `user_id` (–∏–∑ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏–ª–∏ –Ω–æ–≤—ã–π), —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è.
			-> –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (AUTO_CONFIRM_MODE): —Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å email –∏/–∏–ª–∏ phone_number, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT.
			-> –í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ: —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–¥–æ–º, –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (email/SMS).
	-> –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –≤–æ–∑–≤—Ä–∞—Ç 500 –ø—Ä–∏ —Å–±–æ—è—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏ email –∏–ª–∏ SMS.

–ù–∞ –≤—ã—Ö–æ–¥–µ:
	-> `201 Created`: {"token": "<jwt_token>"} (–¢–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)
	-> `200 OK`: {"message": "Verification code sent."} (–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ)
	-> `409 Conflict`: {"message": "User with this email already exists."} (–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
	-> `423 Locked`: {"message": "Account not confirmed. Please verify your email."}
	-> `400 Bad Request`: –ü—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
	-> `500 Internal Server Error`: –í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–±–æ–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ email.

---
#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã**: `utils/*` (–æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã), `utils/util_ydb/driver.py`
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
    - `SA_KEY_JSON` - JSON –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Lockbox ‚Üí ENV)
    - `YDB_ENDPOINT`, `YDB_DATABASE` ([[üíæ jwt-database - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö YandexDatabase]])
    - `YDB_ENDPOINT_FIRMS`, `YDB_DATABASE_FIRMS` ([[üíæ firms-database - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö YandexDatabase]])
    - `JWT_SECRET` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
    - `AUTO_CONFIRM_MODE` - `true` –∏–ª–∏ `false` (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è).
    - `UNISENDER_API_KEY` - API –∫–ª—é—á –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ Unisender (–¥–ª—è email).
    - `UNISENDER_SENDER_EMAIL` - Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –≤ Unisender.
    - `UNISENDER_SENDER_NAME` - –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è email.
    - `UNISENDER_LIST_ID` - ID —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ Unisender.
    - `SMSC_LOGIN` - –õ–æ–≥–∏–Ω –æ—Ç SMSC.ru (–¥–ª—è SMS).
    - `SMSC_PASSWORD` - –ü–∞—Ä–æ–ª—å –æ—Ç SMSC.ru (–¥–ª—è SMS).