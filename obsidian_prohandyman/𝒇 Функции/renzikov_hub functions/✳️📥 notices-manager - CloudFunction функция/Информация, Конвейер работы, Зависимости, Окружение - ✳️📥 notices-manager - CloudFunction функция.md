
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä - d4e3v8k2iijejj8du1t1
–û–ø–∏—Å–∞–Ω–∏–µ - üîî –£–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø–æ–ª—É—á–µ–Ω–∏–µ, –∞—Ä—Ö–∏–≤–∞—Ü–∏—è.
–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - index.handler
–¢–∞–π–º–∞—É—Ç - 15 —Å–µ–∫

---

–ù–∞ –≤—Ö–æ–¥–µ:
	-> `Authorization: Bearer <jwt_token>`: –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API Gateway —á–µ—Ä–µ–∑ auth-gate).
	-> `user_id` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ç–æ—Ä–æ–º auth-gate.
	-> –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
		- `action` (string, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**): –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏. –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
			- `GET`: –ü–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
			- `ARCHIVE`: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
			- `MARK_AS_DELIVERED`: –ü–æ–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–∫ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ/–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ.
		- `notice_id` (string, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è `ARCHIVE` –∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `GET`.
		- `notice_ids` (list of strings, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –°–ø–∏—Å–æ–∫ ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è `MARK_AS_DELIVERED`.
		- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è `action: GET`**:
			- `page` (integer, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–Ω–∞—á–∏–Ω–∞—è —Å 0). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0`.
			- `get_archived` (boolean, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –ï—Å–ª–∏ `true`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`.

–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–±–æ—Ç–∞:
	-> –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ user_id:
		-> –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `user_id` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ç–æ—Ä–∞ API Gateway (`requestContext.authorizer.user_payload`). JWT –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —Ñ—É–Ω–∫—Ü–∏–µ–π [[üõ°Ô∏è auth-gate - CloudFunction —Ñ—É–Ω–∫—Ü–∏—è]] –¥–æ –≤—ã–∑–æ–≤–∞ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
	-> –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
		-> –í—ã–≤–æ–¥ –≤ –ª–æ–≥ –ø–æ–ª–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ event –∏ context –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
	-> –ü–æ–ª—É—á–µ–Ω–∏–µ action –∏–∑ requestContext.apiGateway.operationContext.
	-> –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ YDB:
		-> –ü–æ–ª—É—á–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ –∏ –ø—É–ª–∞ —Å–µ—Å—Å–∏–π –¥–ª—è notices-database —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.
	-> –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ action –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
		-> –î–ª—è GET:
			-> –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: notice_id –∏–∑ pathParams, page –∏ get_archived –∏–∑ queryStringParameters.
			-> –ï—Å–ª–∏ notice_id —É–∫–∞–∑–∞–Ω: –≤—ã–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ ID, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ json-–ø–æ–ª–µ–π, –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö.
			-> –ò–Ω–∞—á–µ: –ø–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–µ–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ä–∞—Å—á–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, –≤—ã–±–æ—Ä–∫–∞ —Å ORDER BY created_at DESC, LIMIT –∏ OFFSET, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.
			-> –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∞–±–ª–∏—Ü—ã (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å): –≤–æ–∑–≤—Ä–∞—Ç –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞.
		-> –î–ª—è ARCHIVE –∏ MARK_AS_DELIVERED:
			-> –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è notice_id –∏–ª–∏ notice_ids.
			-> –î–ª—è ARCHIVE: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ is_archived = true.
			-> –î–ª—è MARK_AS_DELIVERED: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ is_delivered = true –∏ delivered_at = —Ç–µ–∫—É—â–µ–º—É –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤—Å–µ—Ö IDs.
	-> –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
		-> AuthError: 403 Forbidden.
		-> LogicError: 400 Bad Request.
		-> NotFoundError: 404 Not Found.
		-> –û–±—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è: 500 Internal Server Error.

–ù–∞ –≤—ã—Ö–æ–¥–µ:
	-> `200 OK` (GET, —Å–ø–∏—Å–æ–∫): `{"metadata": {"total": int, "page": int, "pages": int}, "data": [array of notices]}` —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ json-–ø–æ–ª—è–º–∏.
	-> `200 OK` (GET, –æ–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ): `{"data": {notice_object}}` —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ json-–ø–æ–ª—è–º–∏.
	-> `200 OK` (ARCHIVE): `{"message": "Notice archived successfully."}`
	-> `200 OK` (MARK_AS_DELIVERED): `{"message": "{count} notices marked as delivered."}`
	-> `400 Bad Request` –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, invalid action, missing params).
	-> `403 Forbidden` –¥–ª—è –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
	-> `404 Not Found` –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü.
	-> `500 Internal Server Error` –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—à–∏–±–æ–∫.

---
#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã**: `utils/ydb_utils.py`, `utils/request_parser.py`, `utils/util_yc_sa/*`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é [[üõ°Ô∏è auth-gate - CloudFunction —Ñ—É–Ω–∫—Ü–∏—è]] –Ω–∞ —É—Ä–æ–≤–Ω–µ API Gateway
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
	- `YDB_ENDPOINT_NOTICES` - –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è `notices-database`.
	- `YDB_DATABASE_NOTICES` - –ü—É—Ç—å –∫ `notices-database`.
	- `YC_LOCKBOX_SECRET_ID` - secret_id Lockbox —Å authorized key JSON
	- `YC_LOCKBOX_VERSION_ID` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –≤–µ—Ä—Å–∏—è —Å–µ–∫—Ä–µ—Ç–∞
	- `YC_LOCKBOX_KEY_FIELD` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∏–º—è –ø–æ–ª—è –≤ —Å–µ–∫—Ä–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é key.json)
	- `STATIC_ACCESS_KEY_ID` [[üóùÔ∏è auth-service-acc - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞.md]]
	- `STATIC_SECRET_ACCESS_KEY` [[üóùÔ∏è auth-service-acc - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞.md]]
